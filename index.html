<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <h2>Twittler</h2>
    <button>All Tweets</button>
    <div></div>

    <script>
      var showAll = function() {
        $('div').html('');
        var index = streams.home.length - 1;

        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $(
            '<p>' 
          +   '<span class="user"></span>'
          +   '<span class="message"></span>'
          +   '<span class="time"></span>'                
          + '</p>'
          );
          $tweet.find('.user').text(tweet.user);
          $tweet.find('.message').text(': ' + tweet.message);
          $tweet.find('.time').text(tweet.time);
          $tweet.appendTo($('div'));
          index -= 1;
        }
      };

      var showFilter = function(username) {
        $('div').html('');
        var i = streams.users[username].length - 1;

        while(i >= 0){
          var tweet = streams.users[username][i];
          var $tweet = $('<h4></h4>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message + tweet.created_at);
          $tweet.appendTo($('div'));
          i -= 1;
        }
      };

      $(document).ready(function(){
        showAll();
        
        $('button').on('click', function() {
          scheduleNextTweet();
          showAll();
        });
        
        $('div').on('click', '.user', function() {
          var username = $(this).text();
          showFilter(username);
        });
      });
    </script>
  </body>
</html>
